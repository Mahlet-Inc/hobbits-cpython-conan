parameters:
  - name: setPython
    type: boolean
    default: true

steps:
  - checkout: self
    persistCredentials: true

  - task: UsePythonVersion@0 
    inputs:
      versionSpec: '3.7'
    condition: ${{ parameters.setPython }}

  - script: |
      yum install python3-pip
    displayName: 'Install pip'
    condition: not( ${{ parameters.setPython }} )

  - script: |
      python3 -m pip install conan
    displayName: 'Install Conan'
  

  - script: |
      cd $(Build.SourcesDirectory)
      conan create .
    displayName: 'Create Conan Package'